{{ if eq .chezmoi.os "android" -}}

#!/bin/sh

pkg update -y
pkg upgrade -y

# rust dev environmet
pkg install rust

pkg install -y termux-tools glab-cli helix git-delta python direnv zsh starship nnn openssh libxml2 libxslt termux-api nodejs
corepack enable pnpm
pip install shell-gpt fava

# web dev environmet
pnpm -g install prettier eslint eslint_d stylelint @fsouza/prettierd yaml-language-server
cargo install taplo-cli --locked --features=lsp

# linux dev environmet
pnpm -g i bash-language-server

echo "y" | termux-setup-storage

if [ ! -L "$HOME/ledger.beancount" ]; then
  ln -s $HOME/storage/shared/Public/ledger.beancount
fi

rm -rf $HOME/.local/share/.zsh-vi-mode
git clone https://github.com/jeffreytse/zsh-vi-mode.git $HOME/.local/share/.zsh-vi-mode

chsh -s zsh

ln $HOME/storage/shared android
ln $HOME/storage/shared/Public

{{ end -}}
